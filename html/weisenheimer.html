<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Weisenheimer</title>

    <script src="https://cdn.jsdelivr.net/gh/ethereum/web3.js/dist/web3.min.js"></script>
</head>
<body>

<script>
    (function () {
        function getWeb3() {
            if (window.ethereum) {
                return new Promise(resolve => {
                    const myWeb3 = new Web3(ethereum);
                    ethereum.enable().then(function () {
                        resolve(myWeb3);
                    })
                });
            } else if(window.web3) {
                const myWeb3 = new Web3(web3.currentProvider);
                return Promise.resolve(myWeb3);
            } else {
                return Promise.reject("No injected web3 found");
            }
        }


        fetch("abi.json").then(function (resonse) {
            return resonse.json();
        }).then(function (abi) {
            getWeb3().then(function(myWeb3) {
                const contract = myWeb3.eth.contract(abi).at("0x245eDE9dac68B84f329e21024E0083ce432700f9");
                contract.allEvents({fromBlock: 0, toBlock:"latest"}, function (err, events) {
                    console.log(events);
                })
            })
        })
    })()
</script>
</body>
</html>